<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Loppem Conversa</title>

    <!-- CSS Libraries -->
    <!-- Bootstrap Core CSS -->
        <link href="css/gallery.css" rel="stylesheet">

    <!--Uncompatible with translation: <link href="css/bootstrap-select.css" rel="stylesheet"> -->

</head>
<body>
<h1>Masonry - imagesLoaded progress</h1>

<div class="grid">
  <div class="grid-sizer"></div>
  <div class="grid-item">
    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/82/orange-tree.jpg" />
  </div>
  <div class="grid-item">
    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/82/submerged.jpg" />
  </div>
  <div class="grid-item">
    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/82/look-out.jpg" />
  </div>
  <div class="grid-item">
    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/82/one-world-trade.jpg" />
  </div>
  <div class="grid-item">
    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/82/drizzle.jpg" />
  </div>
  <div class="grid-item">
    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/82/cat-nose.jpg" />
  </div>
  <div class="grid-item">
    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/82/contrail.jpg" />
  </div>
  <div class="grid-item">
    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/82/golden-hour.jpg" />
  </div>
  <div class="grid-item">
    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/82/flight-formation.jpg" />
  </div>
</div>



    <!-- jQuery -->
    <script src="js/jquery.min.js"></script>
    <script src="js/masonry.pkgd.js"></script>
    <script src="js/imagesloaded.pkgd.js"></script>


    <script type="text/javascript">
// external js: masonry.pkgd.js, imagesloaded.pkgd.js

// init Masonry
var $grid = $('.grid').masonry({
  itemSelector: '.grid-item',
  percentPosition: true,
  columnWidth: '.grid-sizer'
});
// layout Masonry after each image loads
$grid.imagesLoaded().progress( function() {
  $grid.masonry();
});  


    </script>
</body>
</html>

<script type="text/javascript">
                        $(data).find("a").attr("href", function (i, val) {
                        if( val.match(/\.(jpg)$/) ) { 
                            if(pictureIndex >= minIndexPicture && pictureIndex < maxIndexPicture){
                                var imgLocation = folder.concat(val);
                                var divInit = "<div class='grid-item'>";
                                var linkInit = "<a class=\"thumbnail fancybox\" ";
                                var linkRel = "rel=\"ligthbox\" ";      
                                var linkHref = "href=\"".concat(imgLocation).concat("\"");   
                                var linkClose = ">";
                                /*<img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/82/submerged.jpg" />*/
                                var img = "<img src=\"".concat(imgLocation).concat("\"/>");
                                var divEnd = "</a></div>";
                                divContent += divInit.concat(linkInit).concat(linkRel).concat(linkHref).concat(linkClose).concat(img).concat(divEnd);     
                                document.getElementById("grid").innerHTML = divContent;
                            }
                            pictureIndex++;
                        }
                    });
</script>